/**
 * Density Variants System - Mainframe KB Assistant
 *
 * Provides compact, comfortable, and spacious density modes
 * for different user preferences and information density needs.
 */

:root {
  /* Default density mode (comfortable) */
  --density-mode: 'comfortable';

  /* Base measurements for scaling */
  --density-scale: 1;
  --density-padding-scale: 1;
  --density-margin-scale: 1;
  --density-height-scale: 1;
  --density-font-size-scale: 1;
}

/* ===============================================
   COMPACT DENSITY MODE
   =============================================== */

[data-density="compact"],
.density-compact {
  /* Scale factors for compact mode */
  --density-scale: 0.75;
  --density-padding-scale: 0.6;
  --density-margin-scale: 0.7;
  --density-height-scale: 0.8;
  --density-font-size-scale: 0.9;

  /* Spacing overrides for compact */
  --spacing-xs: 2px;
  --spacing-sm: 6px;
  --spacing-md: 10px;
  --spacing-lg: 14px;
  --spacing-xl: 18px;
  --spacing-2xl: 28px;

  /* Component padding overrides */
  --component-padding-sm: 4px;
  --component-padding-md: 6px;
  --component-padding-lg: 8px;
  --component-padding-xl: 12px;

  /* Layout spacing overrides */
  --layout-gap-sm: 6px;
  --layout-gap-md: 10px;
  --layout-gap-lg: 14px;
  --layout-gap-xl: 18px;

  /* Container spacing overrides */
  --container-padding-sm: 10px;
  --container-padding-md: 14px;
  --container-padding-lg: 18px;

  /* Typography adjustments */
  --font-size-xs: clamp(0.6875rem, 0.625rem + 0.25vw, 0.75rem);  /* 11px → 12px */
  --font-size-sm: clamp(0.75rem, 0.6875rem + 0.25vw, 0.875rem);  /* 12px → 14px */
  --font-size-base: clamp(0.875rem, 0.8125rem + 0.25vw, 1rem);   /* 14px → 16px */
  --font-size-lg: clamp(1rem, 0.9375rem + 0.25vw, 1.125rem);     /* 16px → 18px */
  --font-size-xl: clamp(1.125rem, 1.0625rem + 0.25vw, 1.25rem);  /* 18px → 20px */

  /* Line height adjustments for better text density */
  --line-height-tight: 1.2;
  --line-height-snug: 1.3;
  --line-height-normal: 1.4;
  --line-height-relaxed: 1.5;
}

/* Compact mode specific adjustments */
[data-density="compact"] .btn,
.density-compact .btn {
  padding: calc(var(--component-padding-sm) * 1.5) calc(var(--component-padding-md) * 2);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-tight);
  min-height: 28px;
}

[data-density="compact"] .form-field,
.density-compact .form-field {
  margin-bottom: var(--spacing-sm);
}

[data-density="compact"] .form-input,
.density-compact .form-input {
  padding: var(--component-padding-sm) var(--component-padding-md);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-normal);
  min-height: 32px;
}

[data-density="compact"] .card,
.density-compact .card {
  padding: var(--component-padding-md);
}

[data-density="compact"] .list-item,
.density-compact .list-item {
  padding: var(--component-padding-sm) var(--component-padding-md);
  min-height: 36px;
}

[data-density="compact"] .table td,
[data-density="compact"] .table th,
.density-compact .table td,
.density-compact .table th {
  padding: var(--component-padding-sm) var(--component-padding-md);
  font-size: var(--font-size-sm);
}

/* ===============================================
   COMFORTABLE DENSITY MODE (DEFAULT)
   =============================================== */

[data-density="comfortable"],
.density-comfortable {
  /* Use root values - already optimal */
  --density-scale: 1;
  --density-padding-scale: 1;
  --density-margin-scale: 1;
  --density-height-scale: 1;
  --density-font-size-scale: 1;
}

/* ===============================================
   SPACIOUS DENSITY MODE
   =============================================== */

[data-density="spacious"],
.density-spacious {
  /* Scale factors for spacious mode */
  --density-scale: 1.25;
  --density-padding-scale: 1.4;
  --density-margin-scale: 1.3;
  --density-height-scale: 1.2;
  --density-font-size-scale: 1.1;

  /* Spacing overrides for spacious */
  --spacing-xs: 6px;
  --spacing-sm: 16px;
  --spacing-md: 20px;
  --spacing-lg: 28px;
  --spacing-xl: 36px;
  --spacing-2xl: 56px;

  /* Component padding overrides */
  --component-padding-sm: 12px;
  --component-padding-md: 16px;
  --component-padding-lg: 20px;
  --component-padding-xl: 24px;

  /* Layout spacing overrides */
  --layout-gap-sm: 16px;
  --layout-gap-md: 20px;
  --layout-gap-lg: 28px;
  --layout-gap-xl: 36px;

  /* Container spacing overrides */
  --container-padding-sm: 20px;
  --container-padding-md: 28px;
  --container-padding-lg: 36px;

  /* Typography adjustments */
  --font-size-xs: clamp(0.8125rem, 0.75rem + 0.31vw, 0.9375rem);  /* 13px → 15px */
  --font-size-sm: clamp(0.9375rem, 0.875rem + 0.31vw, 1.0625rem); /* 15px → 17px */
  --font-size-base: clamp(1.0625rem, 1rem + 0.31vw, 1.1875rem);   /* 17px → 19px */
  --font-size-lg: clamp(1.1875rem, 1.125rem + 0.31vw, 1.3125rem); /* 19px → 21px */
  --font-size-xl: clamp(1.3125rem, 1.25rem + 0.31vw, 1.4375rem);  /* 21px → 23px */

  /* Generous line heights for accessibility */
  --line-height-tight: 1.3;
  --line-height-snug: 1.45;
  --line-height-normal: 1.6;
  --line-height-relaxed: 1.75;
}

/* Spacious mode specific adjustments */
[data-density="spacious"] .btn,
.density-spacious .btn {
  padding: calc(var(--component-padding-md) * 1.2) calc(var(--component-padding-lg) * 1.5);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  min-height: 44px;
}

[data-density="spacious"] .form-field,
.density-spacious .form-field {
  margin-bottom: var(--spacing-md);
}

[data-density="spacious"] .form-input,
.density-spacious .form-input {
  padding: var(--component-padding-md) var(--component-padding-lg);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  min-height: 44px;
}

[data-density="spacious"] .card,
.density-spacious .card {
  padding: var(--component-padding-lg);
}

[data-density="spacious"] .list-item,
.density-spacious .list-item {
  padding: var(--component-padding-md) var(--component-padding-lg);
  min-height: 52px;
}

[data-density="spacious"] .table td,
[data-density="spacious"] .table th,
.density-spacious .table td,
.density-spacious .table th {
  padding: var(--component-padding-md) var(--component-padding-lg);
  font-size: var(--font-size-base);
}

/* ===============================================
   COMPONENT-SPECIFIC DENSITY ADJUSTMENTS
   =============================================== */

/* Navigation density adjustments */
[data-density="compact"] .nav-item,
.density-compact .nav-item {
  padding: 6px 12px;
  font-size: var(--font-size-sm);
}

[data-density="spacious"] .nav-item,
.density-spacious .nav-item {
  padding: 12px 20px;
  font-size: var(--font-size-base);
}

/* Search bar density adjustments */
[data-density="compact"] .search-bar,
.density-compact .search-bar {
  height: 32px;
  padding: 0 8px;
  font-size: var(--font-size-sm);
}

[data-density="spacious"] .search-bar,
.density-spacious .search-bar {
  height: 48px;
  padding: 0 16px;
  font-size: var(--font-size-base);
}

/* Modal density adjustments */
[data-density="compact"] .modal-content,
.density-compact .modal-content {
  padding: var(--spacing-md);
  max-width: 90vw;
}

[data-density="spacious"] .modal-content,
.density-spacious .modal-content {
  padding: var(--spacing-xl);
  max-width: 95vw;
}

/* Tooltip density adjustments */
[data-density="compact"] .tooltip,
.density-compact .tooltip {
  padding: 4px 8px;
  font-size: var(--font-size-xs);
}

[data-density="spacious"] .tooltip,
.density-spacious .tooltip {
  padding: 8px 16px;
  font-size: var(--font-size-sm);
}

/* ===============================================
   DENSITY CONTROL UTILITIES
   =============================================== */

/* Density toggle component styles */
.density-selector {
  display: flex;
  border: 1px solid var(--border-default);
  border-radius: 0.5rem;
  overflow: hidden;
}

.density-option {
  padding: var(--component-padding-sm) var(--component-padding-md);
  background: var(--surface-base);
  border: none;
  cursor: pointer;
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  transition: all 0.2s ease;
}

.density-option:hover {
  background: var(--surface-elevated);
  color: var(--text-primary);
}

.density-option[aria-pressed="true"] {
  background: var(--text-accent);
  color: var(--text-inverse);
}

.density-option:not(:last-child) {
  border-right: 1px solid var(--border-default);
}

/* ===============================================
   RESPONSIVE DENSITY ADJUSTMENTS
   =============================================== */

/* Auto-adjust density on smaller screens */
@media (max-width: 640px) {
  :root {
    --density-mode: 'compact';
  }

  /* Force compact on mobile unless explicitly set */
  :root:not([data-density]) {
    --spacing-xs: 2px;
    --spacing-sm: 6px;
    --spacing-md: 10px;
    --spacing-lg: 14px;
    --component-padding-sm: 4px;
    --component-padding-md: 6px;
    --component-padding-lg: 8px;
  }
}

/* Auto-adjust to spacious on large screens if accessibility needed */
@media (min-width: 1440px) and (prefers-reduced-motion: no-preference) {
  :root:not([data-density]) {
    /* Optional: Enable spacious by default on large screens */
    /* Uncomment the following lines to enable */
    /*
    --spacing-md: 20px;
    --spacing-lg: 28px;
    --component-padding-md: 16px;
    --component-padding-lg: 20px;
    */
  }
}

/* ===============================================
   ACCESSIBILITY ENHANCEMENTS
   =============================================== */

/* Prefer spacious for accessibility when requested */
@media (prefers-reduced-motion: reduce) {
  [data-density="spacious"],
  .density-spacious {
    /* Enhance spacing for better accessibility */
    --spacing-md: 24px;
    --spacing-lg: 32px;
    --component-padding-md: 20px;
    --component-padding-lg: 24px;
  }
}

/* Touch-friendly spacing on touch devices */
@media (pointer: coarse) {
  :root {
    /* Minimum touch target sizes */
    --min-touch-target: 44px;
  }

  [data-density="compact"] .btn,
  .density-compact .btn {
    min-height: var(--min-touch-target);
    min-width: var(--min-touch-target);
  }

  [data-density="compact"] .form-input,
  .density-compact .form-input {
    min-height: var(--min-touch-target);
  }
}

/* ===============================================
   DENSITY TRANSITION ANIMATIONS
   =============================================== */

/* Smooth transitions when switching density */
.density-transition,
.density-transition * {
  transition:
    padding 0.2s ease-out,
    margin 0.2s ease-out,
    font-size 0.2s ease-out,
    line-height 0.2s ease-out,
    min-height 0.2s ease-out;
}

/* Disable transitions for reduced motion */
@media (prefers-reduced-motion: reduce) {
  .density-transition,
  .density-transition * {
    transition: none;
  }
}

/* ===============================================
   DENSITY-AWARE COMPONENT CLASSES
   =============================================== */

/* Components that automatically adapt to density */
.adaptive-spacing {
  padding: var(--component-padding-md);
  margin-bottom: var(--spacing-md);
}

.adaptive-text {
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
}

.adaptive-button {
  padding: var(--component-padding-sm) var(--component-padding-md);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-tight);
  min-height: 36px;
}

.adaptive-input {
  padding: var(--component-padding-sm) var(--component-padding-md);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  min-height: 36px;
}

/* ===============================================
   UTILITY CLASSES FOR DENSITY CONTROL
   =============================================== */

/* Force specific densities regardless of parent */
.force-compact {
  --spacing-xs: 2px !important;
  --spacing-sm: 6px !important;
  --spacing-md: 10px !important;
  --component-padding-sm: 4px !important;
  --component-padding-md: 6px !important;
}

.force-comfortable {
  --spacing-xs: 4px !important;
  --spacing-sm: 12px !important;
  --spacing-md: 16px !important;
  --component-padding-sm: 8px !important;
  --component-padding-md: 12px !important;
}

.force-spacious {
  --spacing-xs: 6px !important;
  --spacing-sm: 16px !important;
  --spacing-md: 20px !important;
  --component-padding-sm: 12px !important;
  --component-padding-md: 16px !important;
}